\PassOptionsToPackage{table,svgnames,dvipsnames}{xcolor}

\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[sc]{mathpazo}
\usepackage[ngerman,american]{babel}
\usepackage[autostyle]{csquotes}
\usepackage[%
  backend=biber,
  url=false,
  style=alphabetic,
  maxnames=4,
  minnames=3,
  maxbibnames=99,
  giveninits,
  uniquename=init]{biblatex} % TODO: adapt citation style
\usepackage{graphicx}
\usepackage{scrhack} % necessary for listings package
\usepackage{listings}
\usepackage{lstautogobble}
\usepackage{tikz}
\usetikzlibrary{arrows.meta,decorations.markings,calc,shapes.geometric,shadows,arrows}
\usepackage{pgfplots}
\usepackage{pgfplotstable}
\usepackage{booktabs}
\usepackage[final]{microtype}
\usepackage{caption}
\usepackage{subcaption}
\usepackage{amsmath,amsfonts,amssymb,amsthm}
\usepackage{isabelle}
\usepackage{alltt}
\usepackage{bussproofs}
\usepackage{verbatim}
\newtheorem*{thm}{Theorem}
\newtheorem*{lemma}{Lemma}
\newtheorem*{theorem}{Theorem}
\newtheorem*{definition}{Definition}
\usepackage{enumerate}
\usepackage[hidelinks,final]{hyperref} % hidelinks removes colored boxes around references and links

 \usepackage{ifthen}

\newcommand{\DefineSnippet}[2]{%
	\expandafter\newcommand\csname snippet--#1\endcsname{%
		\begin{quote}
			\begin{isabelle}
				#2
			\end{isabelle}
\end{quote}}}
\newcommand{\Snippet}[1]{%
	\ifcsname snippet--#1\endcsname{\csname snippet--#1\endcsname}%
	\else+++++++ERROR: Snippet ``#1 not defined+++++++ \fi}

%\input{generated/snippets}

\newcommand{\LL}{\mathcal{L}}
\newcommand{\RR}{\mathcal{R}}
\newcommand{\repof}{\mathrm{rep\_of}_\mathcal{L}\,}
\newcommand{\ufabstart}{\mathrm{ufa\_}\beta\mathrm{\_start}_\mathcal{L}}
\newcommand{\ufabtrans}{\mathrm{ufa\_}\beta^+_\mathcal{L}}
\newcommand{\ufabrefl}{\mathrm{ufa\_}\beta^*_\mathcal{L}}
\newcommand{\ufaalpha}{\mathrm{ufa\_}\alpha_\mathcal{L}}
\newcommand{\level}{\mathrm{level}_{\LL,\RR}\,}
\newcommand{\iindex}{\mathrm{index}_{\LL,\RR}\,}
\newcommand{\philr}{\phi\, \LL\, \RR\,}
\newcommand{\Philr}{\Phi\, \LL\, \RR\,}
\newcommand{\ufaunion}{\mathrm{ufa\_union}_\LL\,}
\newcommand{\ufaunionl}{\mathrm{union\_by\_rank^{(\LL)}_{\LL,\RR}}\,}
\newcommand{\ufaunionrkl}{\mathrm{union\_by\_rank^{(\RR)}_{\LL,\RR}}\,}

\bibliography{bibliography}

\setkomafont{disposition}{\normalfont\bfseries} % use serif font for headings
\linespread{1.05} % adjust line spread for mathpazo font

% Add table of contents to PDF bookmarks
\BeforeTOCHead[toc]{{\cleardoublepage\pdfbookmark[0]{\contentsname}{toc}}}

% Define TUM corporate design colors
% Taken from http://portal.mytum.de/corporatedesign/index_print/vorlagen/index_farben
\definecolor{TUMBlue}{HTML}{0065BD}
\definecolor{TUMSecondaryBlue}{HTML}{005293}
\definecolor{TUMSecondaryBlue2}{HTML}{003359}
\definecolor{TUMBlack}{HTML}{000000}
\definecolor{TUMWhite}{HTML}{FFFFFF}
\definecolor{TUMDarkGray}{HTML}{333333}
\definecolor{TUMGray}{HTML}{808080}
\definecolor{TUMLightGray}{HTML}{CCCCC6}
\definecolor{TUMAccentGray}{HTML}{DAD7CB}
\definecolor{TUMAccentOrange}{HTML}{E37222}
\definecolor{TUMAccentGreen}{HTML}{A2AD00}
\definecolor{TUMAccentLightBlue}{HTML}{98C6EA}
\definecolor{TUMAccentBlue}{HTML}{64A0C8}

% Settings for pgfplots
\pgfplotsset{compat=newest}
\pgfplotsset{
  % For available color names, see http://www.latextemplates.com/svgnames-colors
  cycle list={TUMBlue\\TUMAccentOrange\\TUMAccentGreen\\TUMSecondaryBlue2\\TUMDarkGray\\},
}


\tikzset{
	treenode/.style = {align=center, inner sep=0pt, text centered,
		font=\sffamily},
	arn_n/.style = {treenode, circle, white, font=\sffamily\bfseries, draw=black,
		fill=black, text width=1.5em},% arbre rouge noir, noeud noir
	arn_r/.style = {treenode, circle, red, draw=red, 
		text width=1.5em, very thick},% arbre rouge noir, noeud rouge
	arn_x/.style = {treenode, rectangle, draw=black,
		minimum width=0.5em, minimum height=0.5em},% arbre rouge noir, nil
	dsf1/.style = {treenode, circle, black, draw=black, 
fill=TUMAccentLightBlue,
	text width=1.5em, thick},
	dsf2/.style = {treenode, circle, black, draw=black, 
fill=TUMAccentOrange,
	text width=1.5em, thick},
	first/.style = {treenode, circle, white, draw=white,},
itria/.style={
	draw,dashed,shape border uses incircle,
	isosceles triangle,shape border rotate=90,yshift=-1.45cm},
rtria/.style={
	draw,dashed,shape border uses incircle,
	isosceles triangle,isosceles triangle apex angle=90,
	shape border rotate=-45,yshift=0.2cm,xshift=0.5cm},
ltria/.style={
	draw,dashed,shape border uses incircle,
	isosceles triangle,isosceles triangle apex angle=90,
	shape border rotate=225,yshift=0.2cm,xshift=0.5cm},
ritria/.style={
	draw,dashed,shape border uses incircle,
	isosceles triangle,isosceles triangle apex angle=110,
	shape border rotate=-55,yshift=0.1cm},
letria/.style={
	draw,dashed,shape border uses incircle,
	isosceles triangle,isosceles triangle apex angle=110,
	shape border rotate=235,yshift=0.1cm}
}

\pgfdeclarelayer{background}
\pgfdeclarelayer{foreground}
\pgfsetlayers{background,main,foreground}

% Define block styles  
\tikzstyle{materia}=[draw, fill=TUMAccentLightBlue, text width=6.0em, text centered,
minimum height=1.5em]
\tikzstyle{practica} = [materia, minimum width=5em,
minimum height=3em, rounded corners]
\tikzstyle{texto} = [above, text centered]
\tikzstyle{linepart} = [draw, thick, color=black!50, -latex', dashed]
\tikzstyle{line} = [draw, thick, color=black!50, -latex']
\tikzstyle{ur}=[draw, text centered, minimum height=0.01em]

% Define distances for bordering
\newcommand{\blockdist}{1.3}
\newcommand{\edgedist}{1.5}


\tikzstyle{materiaa}=[draw, fill=TUMLightGray, text width=6.0em, text centered,
minimum height=1.5em]
\tikzstyle{practicaa} = [materiaa, minimum width=5em,
minimum height=3em, rounded corners]
\newcommand{\defnodea}[2]{node (p#1) [practicaa]
	{{\scriptsize\textit{#2}}}}

\tikzstyle{materiab}=[draw, fill=TUMAccentGreen, text width=6.0em, text centered,
minimum height=1.5em]
\tikzstyle{practicab} = [materiab, minimum width=5em,
minimum height=3em, rounded corners]
\newcommand{\defnodeb}[2]{node (p#1) [practicab]
	{{\scriptsize\textit{#2}}}}

\tikzstyle{materiac}=[draw, fill=TUMAccentLightBlue, text width=6.0em, text centered,
minimum height=1.5em]
\tikzstyle{practicac} = [materiac, minimum width=5em,
minimum height=3em, rounded corners]
\newcommand{\defnodec}[2]{node (p#1) [practicac]
	{{\scriptsize\textit{#2}}}}

\tikzstyle{materiad}=[draw, fill=TUMAccentOrange, text width=6.0em, text centered,
minimum height=1.5em]
\tikzstyle{practicad} = [materiad, minimum width=5em,
minimum height=3em, rounded corners]
\newcommand{\defnoded}[2]{node (p#1) [practicad]
	{{\scriptsize\textit{#2}}}}

% Draw background
\newcommand{\background}[5]{%
	\begin{pgfonlayer}{background}
		% Left-top corner of the background rectangle
		\path (#1.west |- #2.north)+(-0.5,0.5) node (a1) {};
		% Right-bottom corner of the background rectanle
		\path (#3.east |- #4.south)+(+0.5,-0.25) node (a2) {};
		% Draw the background
		\path[fill=white,rounded corners, draw=black!50, dashed]
		(a1) rectangle (a2);
		\path (a1.east |- a1.south)+(0.8,0.2) node (u1)[texto]
		{\normalsize\textit{#5}};
\end{pgfonlayer}}



% Settings for lstlistings
\lstset{%
  basicstyle=\ttfamily,
  columns=fullflexible,
  autogobble,
  keywordstyle=\bfseries\color{TUMBlue},
  stringstyle=\color{TUMAccentGreen}
}
